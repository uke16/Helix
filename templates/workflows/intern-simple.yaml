# Workflow: Intern Simple
# Leichtes internes HELIX-Projekt (helix_internal)
#
# Ablauf: Planning -> Development -> Verify -> Documentation -> Deploy-Test -> E2E -> Deploy-Prod

name: intern-simple
description: Leichtes internes HELIX-Projekt mit vollständigem Deploy-Zyklus
project_type: helix_internal
complexity: simple
max_retries: 3  # Pro Phase mit Sub-Agent Verifikation

phases:
  - id: planning
    name: "Planning & ADR"
    type: consultant
    description: "Erstelle ADR mit Architektur-Entscheidung"
    template: consultant/planning.md
    output:
      - "ADR-*.md"
      - "phases.yaml"
    quality_gate:
      type: adr_valid
    verify_agent: true

  - id: development
    name: "Implementation"
    type: development
    description: "Implementiere den Code gemäß ADR"
    template: developer/python.md
    output:
      - "src/**/*.py"
    quality_gate:
      type: syntax_check
    verify_agent: true

  - id: verify
    name: "Verification"
    type: test
    description: "Unit Tests und Verifikation"
    template: testing/unit.md
    output:
      - "tests/**/*.py"
    quality_gate:
      type: tests_pass
    verify_agent: true

  - id: documentation
    name: "Documentation"
    type: documentation
    description: "Aktualisiere Dokumentation gemäß ADR"
    template: documentation/technical.md
    output:
      - "docs/**/*.md"
      - "CLAUDE.md"
    quality_gate:
      type: files_exist
    verify_agent: false

  - id: deploy-test
    name: "Deploy to Test"
    type: deploy
    target: test
    description: "Deploy zum Test-System"
    template: deploy/test.md
    quality_gate:
      type: deploy_success
    verify_agent: true

  - id: e2e
    name: "E2E Tests"
    type: test
    description: "End-to-End Tests auf Test-System"
    template: testing/e2e.md
    output:
      - "tests/e2e/**/*.py"
    quality_gate:
      type: tests_pass
    verify_agent: true

  - id: deploy-prod
    name: "Deploy to Production"
    type: deploy
    target: production
    description: "Integration ins Produktiv-System"
    template: deploy/production.md
    quality_gate:
      type: integration_pass
    verify_agent: true
    requires_approval: true  # Manuelle Freigabe vor Prod-Deploy
