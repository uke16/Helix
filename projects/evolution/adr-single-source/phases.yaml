# ADR-012: ADR als Single Source of Truth
#
# Dieses Projekt ändert den Consultant und Workflow so dass
# ADRs statt spec.yaml als Single Source of Truth dienen.

phases:
  # Phase 1: Consultant Template
  - id: "1"
    name: "Consultant Template Update"
    type: development
    description: |
      Ändere templates/consultant/session.md.j2:
      - Output: ADR-{name}.md statt spec.yaml
      - ADR-Format Beispiel einfügen
      - finalize_adr() Instruktion
    output:
      - modified/templates/consultant/session.md.j2

  # Phase 2: Streaming Integration
  - id: "2"
    name: "Streaming ADR Integration"
    type: development
    description: |
      Erweitere streaming.py:
      - ADR aus Projekt laden
      - Template Context: adr_files_create, adr_files_modify
      - Fallback auf phase.output wenn kein ADR
    output:
      - modified/src/helix/api/streaming.py

  # Phase 3: Project Manager
  - id: "3"
    name: "Project Manager ADR Support"
    type: development
    description: |
      Erweitere project.py:
      - get_adr() Methode hinzufügen
      - ADR-*.md suchen
      - Backward-compatible mit spec.yaml
    output:
      - modified/src/helix/evolution/project.py
      - new/tests/evolution/test_project_adr.py

  # Phase 4: Developer Templates
  - id: "4"
    name: "Developer Template Updates"
    type: development
    description: |
      Templates zeigen ADR-Files:
      - adr_files_create anzeigen
      - Fallback auf phase_output
      - Hinweis auf ADR-Dokument
    output:
      - modified/templates/developer/_base.md
      - modified/templates/developer/python.md

  # Phase 5: Documentation
  - id: "5"
    name: "Documentation & Skill"
    type: documentation
    description: |
      - skills/helix/evolution/SKILL.md (neu)
      - ARCHITECTURE-EVOLUTION.md update
      - ADR-012 Status auf Implemented
    output:
      - new/skills/helix/evolution/SKILL.md
      - modified/docs/ARCHITECTURE-EVOLUTION.md
      - modified/adr/012-adr-as-single-source-of-truth.md
