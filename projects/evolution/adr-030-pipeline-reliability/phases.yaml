# Evolution Project: ADR-030 Pipeline Reliability
name: adr-030-pipeline-reliability
description: "Fix 5 systematic issues in Evolution Pipeline"
project_type: helix_internal
complexity: minor
max_retries: 2

phases:
  - id: fix-strenum
    name: "Fix 3: StrEnum Compatibility"
    type: development
    description: "Add StrEnum backport for Python 3.10"
    output:
      - "modified/src/helix/phase_status.py"
    quality_gate:
      type: syntax_check
    verify_agent: true

  - id: fix-retry-handler
    name: "Fix 4: Retry Handler"
    type: development
    description: "Create retry handler for transient errors"
    output:
      - "new/src/helix/pipeline/retry_handler.py"
    quality_gate:
      type: syntax_check
    verify_agent: true

  - id: fix-pytest-path
    name: "Fix 1: pytest PATH"
    type: development
    description: "Fix pytest command not found in Claude Runner"
    output:
      - "modified/src/helix/claude_runner.py"
    quality_gate:
      type: syntax_check
    verify_agent: true

  - id: fix-job-status
    name: "Fix 2: Job Status API"
    type: development
    description: "Sync phase status to JobState"
    output:
      - "modified/src/helix/api/streaming.py"
      - "modified/src/helix/api/routes.py"
    quality_gate:
      type: syntax_check
    verify_agent: true

  - id: fix-baseline-validation
    name: "Fix 5: Baseline Test Validation"
    type: development
    description: "Implement baseline-based test evaluation"
    output:
      - "new/src/helix/evolution/test_baseline.py"
    quality_gate:
      type: syntax_check
    verify_agent: true

  - id: tests
    name: "Test Implementation"
    type: development
    description: "Tests for retry handler and baseline validation"
    output:
      - "new/tests/pipeline/test_retry_handler.py"
      - "new/tests/evolution/test_baseline.py"
    quality_gate:
      type: syntax_check
    verify_agent: true
