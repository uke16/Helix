# ADR-038: Deterministic LLM Response Enforcement
# Evolution Project - Phase Configuration

project:
  name: response-enforcement-038
  adr: adr/038-deterministic-llm-response-enforcement.md
  status: pending

phases:
  - id: "1"
    name: "Base Validator Interface"
    type: development
    description: |
      Erstellt das Base Validator Interface und das ResponseEnforcer Grundgerüst.
    output:
      - src/helix/enforcement/__init__.py
      - src/helix/enforcement/response_enforcer.py
      - src/helix/enforcement/validators/__init__.py
      - src/helix/enforcement/validators/base.py
    quality_gate:
      type: syntax_check
      file_patterns:
        - "output/new/**/*.py"

  - id: "2"
    name: "Step Marker Validator"
    type: development
    description: |
      Implementiert den StepMarkerValidator mit Fallback-Heuristik.
    output:
      - src/helix/enforcement/validators/step_marker.py
      - tests/unit/enforcement/test_step_marker.py
    quality_gate:
      type: tests_pass
      test_command: "pytest tests/unit/enforcement/test_step_marker.py -v"
      timeout: 60

  - id: "3"
    name: "ADR Structure & File Existence Validators"
    type: development
    description: |
      Implementiert ADRStructureValidator und FileExistenceValidator.
    output:
      - src/helix/enforcement/validators/adr_structure.py
      - src/helix/enforcement/validators/file_existence.py
      - tests/unit/enforcement/test_validators.py
    quality_gate:
      type: tests_pass
      test_command: "pytest tests/unit/enforcement/ -v"
      timeout: 120

  - id: "4"
    name: "ResponseEnforcer Tests & Integration"
    type: development
    description: |
      Vollständige Tests für ResponseEnforcer und Integration in ClaudeRunner.
    output:
      - tests/unit/enforcement/test_response_enforcer.py
      - modified/src/helix/consultant/claude_runner.py
    quality_gate:
      type: tests_pass
      test_command: "pytest tests/unit/enforcement/ -v"
      timeout: 180

  - id: "5"
    name: "OpenAI Route Integration & Documentation"
    type: development
    description: |
      Integration in OpenAI Route und Dokumentations-Update.
    output:
      - modified/src/helix/api/routes/openai.py
      - modified/docs/ARCHITECTURE-MODULES.md
    quality_gate:
      type: files_exist
      required_files:
        - output/modified/src/helix/api/routes/openai.py
        - output/modified/docs/ARCHITECTURE-MODULES.md
